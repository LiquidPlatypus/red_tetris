<script setup>
import { computed } from 'vue';

const font = {
	'!': [
		[0,0,1,0,0],
		[0,0,1,0,0],
		[0,0,1,0,0],
		[0,0,0,0,0],
		[0,0,1,0,0],
	],
	A: [
		[0,1,1,1,0],
		[1,0,0,0,1],
		[1,1,1,1,1],
		[1,0,0,0,1],
		[1,0,0,0,1],
	],
	B: [
		[1,1,1,0,0],
		[1,0,0,1,0],
		[1,1,1,0,0],
		[1,0,0,1,0],
		[1,1,1,0,0],
	],
	C: [
		[0,1,1,1,0],
		[1,0,0,0,1],
		[1,0,0,0,0],
		[1,0,0,0,1],
		[0,1,1,1,0],
	],
	D: [
		[1,1,1,0,0],
		[1,0,0,1,0],
		[1,0,0,1,0],
		[1,0,0,1,0],
		[1,1,1,0,0],
	],
	E: [
		[1,1,1,1,1],
		[1,0,0,0,0],
		[1,1,1,1,0],
		[1,0,0,0,0],
		[1,1,1,1,1],
	],
	F: [
		[1,1,1,1,1],
		[1,0,0,0,0],
		[1,1,1,1,0],
		[1,0,0,0,0],
		[1,0,0,0,0],
	],
	G: [
		[0,1,1,1,0],
		[1,0,0,0,0],
		[1,0,1,1,1],
		[1,0,0,0,1],
		[0,1,1,1,0],
	],
	H: [
		[1,0,0,0,1],
		[1,0,0,0,1],
		[1,1,1,1,1],
		[1,0,0,0,1],
		[1,0,0,0,1],
	],
	I: [
		[1,1,1],
		[0,1,0],
		[0,1,0],
		[0,1,0],
		[1,1,1],
	],
	J: [
		[0,0,1,1,1],
		[0,0,0,1,0],
		[0,0,0,1,0],
		[1,0,0,1,0],
		[0,1,1,0,0],
	],
	K: [
		[1,0,0,0,1],
		[1,0,0,1,0],
		[1,1,1,0,0],
		[1,0,0,1,0],
		[1,0,0,0,1],
	],
	L: [
		[1,0,0,0,0],
		[1,0,0,0,0],
		[1,0,0,0,0],
		[1,0,0,0,0],
		[1,1,1,1,1],
	],
	M: [
		[1,0,0,0,1],
		[1,1,0,1,1],
		[1,0,1,0,1],
		[1,0,0,0,1],
		[1,0,0,0,1],
	],
	N: [
		[1,0,0,0,1],
		[1,1,0,0,1],
		[1,0,1,0,1],
		[1,0,0,1,1],
		[1,0,0,0,1],
	],
	O: [
		[0,1,1,1,0],
		[1,0,0,0,1],
		[1,0,0,0,1],
		[1,0,0,0,1],
		[0,1,1,1,0],
	],
	P: [
		[1,1,1,1,0],
		[1,0,0,0,1],
		[1,1,1,1,0],
		[1,0,0,0,0],
		[1,0,0,0,0],
	],
	Q: [
		[0,1,1,1,0],
		[1,0,0,0,1],
		[1,0,0,0,1],
		[1,0,0,1,1],
		[0,1,1,1,1],
	],
	R: [
		[1,1,1,1,0],
		[1,0,0,0,1],
		[1,1,1,1,0],
		[1,0,0,1,0],
		[1,0,0,0,1],
	],
	S: [
		[0,1,1,1,1],
		[1,0,0,0,0],
		[0,1,1,1,0],
		[0,0,0,0,1],
		[1,1,1,1,0],
	],
	T: [
		[1,1,1,1,1],
		[0,0,1,0,0],
		[0,0,1,0,0],
		[0,0,1,0,0],
		[0,0,1,0,0],
	],
	U: [
		[1,0,0,0,1],
		[1,0,0,0,1],
		[1,0,0,0,1],
		[1,0,0,0,1],
		[0,1,1,1,0],
	],
	V: [
		[1,0,0,0,1],
		[1,0,0,0,1],
		[1,0,0,0,1],
		[0,1,0,1,0],
		[0,0,1,0,0],
	],
	W: [
		[1,0,0,0,1],
		[1,0,0,0,1],
		[1,0,1,0,1],
		[1,1,0,1,1],
		[1,0,0,0,1],
	],
	X: [
		[1,0,0,0,1],
		[0,1,0,1,0],
		[0,0,1,0,0],
		[0,1,0,1,0],
		[1,0,0,0,1],
	],
	Y: [
		[1,0,0,0,1],
		[0,1,0,1,0],
		[0,0,1,0,0],
		[0,0,1,0,0],
		[0,0,1,0,0],
	],
	Z: [
		[1,1,1,1,1],
		[0,0,0,1,0],
		[0,0,1,0,0],
		[0,1,0,0,0],
		[1,1,1,1,1],
	],
};

const props = defineProps({
	text: {
		type: String,
		required: true,
	}
});

const letters = computed(() =>
	props.text
		.toUpperCase()
		.split('')
		.map((char) => font[char] || [])
);
</script>

<template>
	<div class="tetris-text">
		<div v-for="(letter, li) in letters" :key="li" class="letter">
			<div v-for="(row, r) in letter" :key="r" class="row">
				<div
					v-for="(cell, c) in row"
					:key="c"
					class="pixel"
					:class="cell ? 'tetris-font-block' : ''"
				>
				</div>
			</div>
		</div>
	</div>
</template>

<style scoped>
.tetris-text {
	display: flex;
	gap: 7px;
	align-items: flex-start;
}

.letter {
	display: grid;
	grid-template-rows: repeat(5, 10px);
	gap: 1px
}

.row {
	display: grid;
	grid-auto-flow: column;
	grid-template-columns: repeat(auto-fit, 7px);
	gap: 1px
}

.pixel {
	width: 7px;
	height: 10px;
}

.tetris-font-block {
	width: 7px;
	height: 10px;
	background: #3D3D3D;
	position: relative;

	background-image:
		repeating-linear-gradient(90deg, #88ac28 0, #88ac28 0.5px, transparent 1px, transparent 5px),
		repeating-linear-gradient(0deg,  #88ac28 0, #88ac28 0.5px, transparent 1px, transparent 5px);

	background-size: 4px 4px; /* taille des sous-pixels */
}

</style>
